/* Base */

/* Eventually, modern browsers will support CSS 4 System Colors
 * (<https://www.w3.org/TR/css-color-4/#css-system-colors>).  Until
 * then, browser-specific stuff is needed.
 *
 * See:
 * <https://bugzilla.mozilla.org/show_bug.cgi?id=1590894>
 * <https://bugs.chromium.org/p/chromium/issues/detail?id=1015968#makechanges>
 * <https://www.chromestatus.com/feature/5678291530809344>
 * */

:root {
 --color-background: Window;
 --color-foreground: WindowText;
 --color-inactive: GrayText;
 --color-active: Highlight;
 --font-main: caption;
}

:root.gecko {
 --color-background: -moz-field;
 --color-foreground: -moz-fieldtext;
}

:root.webkit {
 --color-active: -webkit-link;
}

body, input, textarea {
 background: var(--color-background);
 color: var(--color-foreground);
 font: var(--font-main);
}
input, textarea {
 background: transparent;
}
a, a:hover, a:visited {
 color: var(--color-active);
 text-decoration: none;
}
a:hover {
 text-decoration: underline;
}


/* App */

:root, body, main {
 height: 100%; margin: 0;
}

main {
 display: grid;
 grid: min-content minmax(0, min-content) / minmax(0, 1fr) min-content;
 grid-gap: 1em 0.5em;
 padding: 0.75em; box-sizing: border-box;
}
#title {
 max-width: 100%; height: 1.25em; margin-top: -0.125em;
}
#title:not(:focus) {
 text-overflow: ellipsis;
}
#title, #body {
 display: block;
 border: none;
 border-bottom: 0.125rem solid var(--color-inactive);
 transition: border-bottom 0.125s linear;
}
#title:focus, #body:focus {
 border-bottom-color: var(--color-active);
 outline: none;
}
#title, #toolbar > * {
 font-size: 2em;
}
#toolbar {
 grid-area: 1 / 2;
 display: flex;
 color: var(--color-active);
}
#toolbar > * {
 display: inline-flex; align-items: center; justify-content: center;
 width: 1.1875em; height: 1.1875em;
 margin-left: 0.25em;
 /* `a { color: -webkit-link; }` causes visited links to be colored differently */
 color: inherit;
 outline: 0.125rem solid transparent;
 transition: outline-color 0.125s linear;
 background: none; border: none; cursor: pointer; padding: 0;
 -webkit-tap-highlight-color: transparent;
}
#toolbar > *:focus {
 outline-color: inherit;
}
#toolbar > button::-moz-focus-inner {
 border: none; padding: 0;
}
#toolbar > * > svg {
 width: calc(var(--size) * 1px); height: calc(var(--size) * 1px);
}
#body {
 grid-column: span 2;
 max-height: calc(100% - 0.125rem * 2);
 line-height: 1.25;
 resize: none;
}
.webkit #body {
 max-height: calc(100% - 0.125rem * 3);  /* wat - <https://i.imgur.com/IppKJ.jpg> */
}

@media screen and (max-width: 480px) {
 #title, #toolbar > * {
  font-size: 1.5em;
 }
}
